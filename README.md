## 목차

> - [개요](#프로젝트-개요)
> - [통신형식](#통신형식)
> - [기능구현](#기능구현)
> - [회고](#회고)

## 프로젝트 개요

본 프로젝트는 3학년 재학당시 **RPG게임 (메이플스토리) 클론코딩**을 목표로 진행되었으며 게임내 여러 다른 사용자의 상호작용으로 캐릭터 이동처리 및 캐릭터 포탈 이동까지 구현한 서버부분 입니다. **소켓을 이용한 TCP 통신**을 사용하였고 클라이언트와의 통신 규약은 **Opcode를 포함한 바이트 배열로** 정하여 구현하였습니다. 기여도는 50%로 주로 통신쪽을 담당하여 개발하였습니다.

## 통신형식

모든 플레이어의 정보는 서버에서 유지하며  
클라이언트와의 통신 규약은 Opcode를 포함한 바이트 배열로 하였습니다.  
서버 측 부분의 Opcode는 다음과 같습니다

```
Opcode 5

클라이언트에 캐릭터 초기화 알림 플래그
현재 맵에 상주하는 플레이어 아이디, 이름, 맵 아이디, 캐릭터 종류 정보를 클라이언트에 전송
```

```
Opcode 10

클라이언트가 보낸 사용자의 KeyCode(KeyUp)를 기반으로 서버 측에서
캐릭터의 위치를 계산하여 클라이언트에 전송
포탈 이동시에는 바뀔 맵의 정보를 전송
```

```
Opcode 11

클라이언트가 보낸 사용자의 KeyCode(KeyDown)를 기반으로 서버 측에서
캐릭터의 위치를 계산하여 클라이언트에 전송
```

## 기능구현

- 각 플레이어를 구성하기 위해 **연결된 소켓, 맵 정보, 플레이어 정보**를 포함하는 클래스를 작성
- 클라이언트의 맵에 플레이어를 위치시키기 위해서 Map 클래스에 **각 플레이어들의 집합인 ArrayList**로 관리
- **Map 별로 브로드캐스팅을** 하며 Map 클래스 안의 ArrayList에 포함된 모든 플레이어 객체의 연결된 소켓을 통하여 전송

아래 사진은 여러 플레이어들의 게임접속 화면입니다.

<img width="80%" alt="img" src ="https://user-images.githubusercontent.com/33706043/130346490-72007f6e-ce1d-4f4c-a06e-60ee536401e3.jpeg"/>

## 회고

> 본 프로젝트를 진행하면서 자바에서의 소켓 사용 및 스레드 사용을 다시 한번 배울 수 있는 계기가 되었고  
> 기본적인 통신에 대한 이해도 할 수 있었습니다.  
> 팀원들과의 단기 프로젝트로 끝나서 아쉬움이 남지만 서버를 만들어 보면서 고민하였던 시간들이 의미가 있었고  
> 그렇기에 포트폴리오 프로젝트 목록에 넣게 되었습니다.
