## 목차

> - [개요](#프로젝트-개요)
> - [통신형식](#통신형식)
> - [기능구현](#기능구현)

## 프로젝트 개요

본 프로젝트는 3학년 재학당시 TCP 소켓 통신을 주제로 **RPG게임 (메이플스토리) 클론코딩**을 목표로 진행되었으며 게임내 여러 다른 사용자의 기본적인 상호작용인 기본적인 캐릭터 이동, 캐릭터 포탈 이동까지 구현한 서버부분 입니다. **소켓을 이용한 TCP 통신**을 사용하였고 클라이언트와의 통신 규약은 **Opcode를 포함한 바이트 배열로** 정하여 구현하였습니다. 기여도는 50%로 주로 통신쪽을 담당하여 개발하였습니다.

## 통신형식

모든 플레이어의 정보는 서버에서 유지하며  
클라이언트와의 통신 규약은 Opcode를 포함한 바이트 배열로 구현하였습니다.  
서버 측 부분의 Opcode는 다음과 같습니다

**Opcode 5**

클라이언트에 캐릭터 초기화 알림
현재 맵에 상주하는 플레이어 아이디, 이름, 맵 아이디, 캐릭터 종류 정보를 클라이언트에 전송

**Opcode 10**

클라이언트가 보낸 사용자의 KeyCode(KeyUp)를 기반으로 서버 측에서
캐릭터의 위치를 계산하여 클라이언트에 전송
포탈 이동시에는 바뀔 맵의 정보를 전송

**Opcode 11**

클라이언트가 보낸 사용자의 KeyCode(KeyDown)를 기반으로 서버 측에서
캐릭터의 위치를 계산하여 클라이언트에 전송

<br/>

## 기능구현

각 플레이어를 구성하기 위해 **연결된 소켓, 맵 정보, 플레이어 정보**를 포함하는 클래스를 작성  
클라이언트의 맵에 플레이어를 위치시키기 위해서 Map 클래스에 **각 플레이어들의 집합인 ArrayList**로 관리  
**Map 별로 브로드캐스팅을** 하며 Map 클래스 안의 ArrayList에 포함된 모든 플레이어 객체의 연결된 소켓을 통하여 전송

아래 사진은 여러 플레이어들의 게임접속 화면입니다.

<img width="80%" alt="img" src ="https://user-images.githubusercontent.com/33706043/130346490-72007f6e-ce1d-4f4c-a06e-60ee536401e3.jpeg"/>
